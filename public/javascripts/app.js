!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},i={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},a=function(e,t){var i,r,a=[];i=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var n=0,o=i.length;o>n;n++)r=i[n],".."===r?a.pop():"."!==r&&""!==r&&a.push(r);return a.join("/")},n=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(i){var r=n(t),o=a(r,i);return e.require(o,t)}},s=function(e,t){var r={id:e,exports:{}};return i[e]=r,t(r.exports,o(e),r),r.exports},l=function(e,n){var o=a(e,".");if(null==n&&(n="/"),r(i,o))return i[o].exports;if(r(t,o))return s(o,t[o]);var l=a(o,"./index");if(r(i,l))return i[l].exports;if(r(t,l))return s(l,t[l]);throw new Error('Cannot find module "'+e+'" from "'+n+'"')},p=function(e,i){if("object"==typeof e)for(var a in e)r(e,a)&&(t[a]=e[a]);else t[e]=i},u=function(){var e=[];for(var i in t)r(t,i)&&e.push(i);return e};e.require=l,e.require.define=p,e.require.register=p,e.require.list=u,e.require.brunch=!0}}(),require.register("application",function(e,t,i){Application={initialize:function(){var e=Backbone.Model.extend({url:"/api/active_tracks"}),i=new e({storms:window.initialData.activeTracks}),r=t("views/map_view"),a=t("lib/router");this.mapView=new r({model:i}),this.router=new a,"function"==typeof Object.freeze&&Object.freeze(this)}},i.exports=Application}),require.register("initialize",function(e,t){var i=t("application");$(function(){i.initialize(),Backbone.history.start()})}),require.register("lib/maplabel",function(e,t,i){function r(e){this.set("fontFamily","sans-serif"),this.set("fontSize",12),this.set("fontColor","#000000"),this.set("strokeWeight",4),this.set("strokeColor","#ffffff"),this.set("align","center"),this.set("zIndex",1e3),this.setValues(e)}r.prototype=new google.maps.OverlayView,window.MapLabel=r,r.prototype.changed=function(e){switch(e){case"fontFamily":case"fontSize":case"fontColor":case"strokeWeight":case"strokeColor":case"align":case"text":return this.drawCanvas_();case"maxZoom":case"minZoom":case"position":return this.draw()}},r.prototype.drawCanvas_=function(){var e=this.canvas_;if(e){var t=e.style;t.zIndex=this.get("zIndex");var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.strokeStyle=this.get("strokeColor"),i.fillStyle=this.get("fontColor"),i.font=this.get("fontSize")+"px "+this.get("fontFamily");var r=Number(this.get("strokeWeight")),a=this.get("text");if(a){r&&(i.lineWidth=r,i.strokeText(a,r,r)),i.fillText(a,r,r);var n=i.measureText(a),o=n.width+r;t.marginLeft=this.getMarginLeft_(o)+"px",t.marginTop="-0.4em"}}},r.prototype.onAdd=function(){var e=this.canvas_=document.createElement("canvas"),t=e.style;t.position="absolute";var i=e.getContext("2d");i.lineJoin="round",i.textBaseline="top",this.drawCanvas_();var r=this.getPanes();r&&r.mapPane.appendChild(e)},r.prototype.onAdd=r.prototype.onAdd,r.prototype.getMarginLeft_=function(e){switch(this.get("align")){case"left":return 0;case"right":return-e}return e/-2},r.prototype.draw=function(){var e=this.getProjection();if(e&&this.canvas_){var t=this.get("position");if(t){var i=e.fromLatLngToDivPixel(t),r=this.canvas_.style;r.top=i.y+"px",r.left=i.x+"px",r.visibility=this.getVisible_()}}},r.prototype.draw=r.prototype.draw,r.prototype.getVisible_=function(){var e=this.get("minZoom"),t=this.get("maxZoom");if(void 0===e&&void 0===t)return"";var i=this.getMap();if(!i)return"";var r=i.getZoom();return e>r||r>t?"hidden":""},r.prototype.onRemove=function(){var e=this.canvas_;e&&e.parentNode&&e.parentNode.removeChild(e)},r.prototype.onRemove=r.prototype.onRemove,i.exports=r}),require.register("lib/router",function(e,t,i){var r=t("application");i.exports=Backbone.Router.extend({routes:{"":"map"},map:function(){$("body").html(r.mapView.render().el)}})}),require.register("lib/storm_meta",function(e,t,i){var r={};r.damrey="達維",r["kong-rey"]="康妮",r.nakri="娜基莉",r.krovanh="科羅旺",r.sarika="莎莉嘉",r.haikui="海葵",r.yutu="玉兔",r.fengshen="風神",r.dujuan="杜鵑",r.haima="海馬",r.kirogi="鴻雁",r.toraji="桃芝",r.kalmaegi="海鷗",r.mujigae="彩虹",r.meari="米雷",r.kaitak="啟德",r.manyi="萬宜",r.fungwong="鳳凰",r.choiwan="彩雲",r.maon="馬鞍",r.tembin="天秤",r.usagi="天兔",r.kammuri="北冕",r.koppu="巨爵",r.tokage="蝎虎",r.bolaven="布拉萬",r.pabuk="帕布",r.phanfone="巴蓬",r.champi="薔琵",r.nock_ten="洛坦",r.sanba="三巴",r.wutip="蝴蝶",r.vongfong="黃蜂",r["in-fa"]="煙花",r.muifa="梅花",r.jelawat="杰拉華",r.sepat="聖帕",r.nuri="鸚鵡",r.melor="茉莉",r.merbok="苗柏",r.ewiniar="艾雲尼",r.fitow="菲特",r.sinlaku="森拉克",r.nepartak="尼伯特",r.nanmadol="南瑪都",r.maliksi="馬力斯",r.danas="丹娜絲",r.hagupit="黑格比",r.lupit="盧碧",r.talas="塔拉斯",r.kaemi="格美",r.nari="百合",r.changmi="薔薇",r.mirinae="銀河",r.noru="奧鹿",r.prapiroon="派比安",r.vipa="韋帕",r.megkhla="米克拉",r.nida="妮妲",r.kularb="玫瑰",r.maria="瑪莉亞",r.francisco="范斯高",r.higos="海高斯",r.omais="奧麥斯",r.roke="洛克",r["son-tinh"]="山神",r.lekima="利奇馬",r.bavi="巴威",r.conson="康森",r.sonca="桑卡",r.bopha="安比",r.krosa="羅莎",r.maysak="美莎克",r.chanthu="燦都",r.nesat="納沙",r.wukong="悟空",r.haiyan="海燕",r.haishen="海神",r.dianmu="電母",r.haitang="海棠",r.sonamu="清松",r.podul="楊柳",r.noul="紅霞",r.mindulle="蒲公英",r.nalgae="尼格",r.shanshan="珊珊",r.lingling="玲玲",r.dolphin_chi="白海豚",r.lionrock_chi="獅子山",r.banyan_c="榕樹",r.yagi="摩羯",r.kajiki="劍魚",r.kujira="鯨魚",r.kompasu="圓規",r.washi="天鴿",r.leepi="麗琵",r.faxai="法茜",r.chan_hom="燦鴻",r.namtheun="南川",r.pakhar="帕卡",r.bebinca="貝碧嘉",r.peipah="琵琶",r.linfa="蓮花",r.malou="瑪瑙",r.sanvu="珊瑚",r.rumbia="溫比亞",r.tapah="塔巴",r.nangka="浪卡",r.meranti="莫蘭蒂",r.mawar="瑪娃",r.soulik="蘇力",r.mitag="米娜",r.soudelor="蘇迪羅",r.rai="雷伊",r.guchol="古超",r.cimaron="西馬侖",r.hagibis="海貝思",r.molave="莫拉菲",r.malakas="馬勒卡",r.talim="泰利",r.chebi="飛燕",r.noguri="浣熊",r.koni="天鵝",r.megi="鮎魚",r.doksuri="杜蘇芮",r.mangkhut="山竹",r.rammasun="威馬遜",r.atsani="艾莎尼",r.chaba="暹芭",r.khanun="卡努",r.utor="尤特",r.matmo="麥德姆",r.etau="艾濤",r.aere="艾利",r.vicente="韋森特",r.trami="潭美",r.halong="夏浪",r.vamco="環高",r.songda="桑達",r.saola="蘇拉",i.exports={stormTcName:r}}),require.register("lib/view_helper",function(){}),require.register("models/collection",function(e,t,i){i.exports=Backbone.Collection.extend({})}),require.register("models/model",function(e,t,i){i.exports=Backbone.Model.extend({})}),require.register("views/map_styles",function(e,t,i){i.exports={neutralBlue:[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}]}}),require.register("views/map_view",function(e,t,i){var r=t("./view"),a=t("./templates/map");mapStyles=t("./map_styles"),TextOverlay=t("../lib/maplabel"),stormMeta=t("../lib/storm_meta"),i.exports=r.extend({id:"map-view",template:a,map:null,initialize:function(){r.prototype.initialize.call(this)},afterRender:function(){this.initMap(),this.drawTracks(this.model.get("storms"))},initMap:function(){var e={center:new google.maps.LatLng(17.43,117.25),zoom:6,mapTypeId:google.maps.MapTypeId.ROAD,panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,styles:mapStyles.neutralBlue};map=new google.maps.Map(this.el,e)},drawTracks:function(e){var t,i=["#000000","#009900","#0000FF","#FF0000","#FF96C8","#8C1E78"];_.each(e,function(e){for(var r=0;r<e.pastTrack.length;++r){var a,n=e.pastTrack[r];a=r<e.pastTrack.length-1?e.pastTrack[r+1]:e.currentPos;var o=[new google.maps.LatLng(Number(n.lat),Number(n.lng)),new google.maps.LatLng(Number(a.lat),Number(a.lng))];t=new google.maps.Polyline({path:o,geodesic:!0,strokeColor:i[this.getStrength(Number(n.centerWind))],strokeOpacity:.8,strokeWeight:2}),t.setMap(map)}for(var s={path:"M 0,-2 0,2",strokeOpacity:.8,scale:2},r=1;r<e.forecastTrack.length;++r){var n;n=1==r?e.currentPos:e.forecastTrack[r-1];var a=e.forecastTrack[r],o=[new google.maps.LatLng(Number(n.lat),Number(n.lng)),new google.maps.LatLng(Number(a.lat),Number(a.lng))];t=new google.maps.Polyline({path:o,geodesic:!0,strokeOpacity:0,strokeColor:i[this.getStrength(Number(n.centerWind))],strokeWeight:2,icons:[{icon:s,offset:"0",repeat:"20px"}]}),t.setMap(map)}new TextOverlay({text:stormMeta.stormTcName[e.name.toLowerCase()]||e.name,position:new google.maps.LatLng(Number(e.currentPos.lat),Number(e.currentPos.lng)),map:map,fontSize:18,fontFamily:'Arial, "文泉驛正黑", "WenQuanYi Zen Hei", "儷黑 Pro", "LiHei Pro", "微軟正黑體", "Microsoft JhengHei", sans-serif',align:"left",strokeWeight:3,fontColor:"#FFFFFF",strokeColor:"#000000"})},this)},getStrength:function(e){return e>=185?5:e>=150?4:e>=118?3:e>=88?2:e>=63?1:0}})}),require.register("views/templates/map",function(e,t,i){var r=Handlebars.template(function(e,t,i,r,a){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{},"<div></div>\r\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof i&&i&&i.exports&&(i.exports=r)}),require.register("views/view",function(e,t,i){t("lib/view_helper"),i.exports=Backbone.View.extend({initialize:function(){this.render=_.bind(this.render,this)},template:function(){},getRenderData:function(){},render:function(){return this.$el.html(this.template(this.getRenderData())),this.afterRender(),this},afterRender:function(){}})});